<section class="contact" id="contact">
    <div class="container-contact">
        <h2 style="text-transform:none">Laten we samenwerken</h2>
        <p class="headline">Heb je een project in gedachten? Stuur me een bericht en laten we bespreken hoe ik je kan helpen.</p>
        <div class="card-contact" role="region" aria-labelledby="contact-title">
            <header class="card-header">
                <p id="contact-title" class="card-title">
                    <span class="dots">
                        <span class="dot destructive" aria-hidden="true"></span>
                        <span class="dot warning" aria-hidden="true"></span>
                        <span class="dot success" aria-hidden="true"></span>
                    </span>
                    <span class="title-text">Nieuw bericht aan Dennis Ulĳn</span>
                </p>
            </header>
            <div class="card-content">
                <form class="form" method="post" action="/contact.php">
                    <!-- To (static) -->
                    <div class="field-group">
                        <div class="field-label">
                            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                                <rect
                                    width="20"
                                    height="16"
                                    x="2"
                                    y="4"
                                    rx="2"
                                ></rect>
                                <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                            </svg>
                            <span>Aan:</span>
                        </div>
                        <div class="fake-field">
                            <a href="mailto:info@dennisulijn.com">info@dennisulijn.com</a>
                            <svg
                                class="icon"
                                viewBox="0 0 24 24"
                                aria-hidden="true"
                                style="transform:translateY(0.25rem);padding-left:0.25rem;"
                            >
                                <path d="M8.603 3.799A4.49 4.49 0 0 1 12 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 0 1 3.498 1.307 4.491 4.491 0 0 1 1.307 3.497A4.49 4.49 0 0 1 21.75 12a4.49 4.49 0 0 1-1.549 3.397 4.491 4.491 0 0 1-1.307 3.497 4.491 4.491 0 0 1-3.497 1.307A4.49 4.49 0 0 1 12 21.75a4.49 4.49 0 0 1-3.397-1.549 4.49 4.49 0 0 1-3.498-1.306 4.491 4.491 0 0 1-1.307-3.498A4.49 4.49 0 0 1 2.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 0 1 1.307-3.497 4.49 4.49 0 0 1 3.497-1.307Zm7.007 6.387a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z"></path>
                            </svg>
                        </div>
                    </div>
                    <!-- From -->
                    <div class="field-group">
                        <div class="field-label">
                            <!-- user icon -->
                            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            <span>Van:</span>
                        </div>
                        <div class="grid">
                            <input
                                type="text"
                                name="name"
                                placeholder="Jouw naam"
                                required
                            >
                            <input
                                type="email"
                                name="email"
                                placeholder="jouw.email@example.com"
                                required
                            >
                        </div>
                    </div>
                    <!-- Subject -->
                    <div class="field-group">
                        <div class="field-label">
                            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path>
                            </svg>
                            <span>Onderwerp:</span>
                        </div>
                        <input
                            type="text"
                            name="subject"
                            placeholder="Waar gaat jouw bericht over?"
                            required
                        >
                    </div>
                    <!-- Message -->
                    <div class="field-group">
                        <div class="field-label">
                            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"/>
                            </svg>
                            <span>Bericht:</span>
                        </div>
                        <textarea name="message" placeholder="Vertel me over jouw project, uitdaging of vraag..." required></textarea>
                    </div>
                    <!-- Submit -->
                    <div class="form-actions">
                        <button type="submit" class="btn dark">
                            <!-- send icon -->
                            <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"></path>
                                <path d="m21.854 2.147-10.94 10.939"></path>
                            </svg>
                            <span class="btn-label">Verstuur bericht</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
<div id="contact-modal" class="contact-modal" style="display:none;">
    <div class="contact-modal-content">
        <div class="logo">
            <h2>dennisulijn</h2>
        </div>
        <p>Uw bericht is verzonden. Ik neem zo snel mogelijk contact met u op.</p>
        <button id="close-modal">Sluiten</button>
    </div>
</div>
<script>
document.querySelector(".form").addEventListener("submit", function(e) {
  e.preventDefault();

  const form = e.target;
  const formData = new FormData(form);

  fetch("/contact.php", {
    method: "POST",
    body: formData
  })
  .then(res => res.text())
  .then(data => {
    if (data.includes("error")) {
      alert("Er ging iets mis. Probeer opnieuw.");
    } else {
      document.getElementById("contact-modal").style.display = "flex";
      form.reset();
    }
  })
  .catch(() => alert("Verbinding mislukt. Probeer opnieuw."));
});

// Sluit modal
document.getElementById("close-modal").addEventListener("click", () => {
  document.getElementById("contact-modal").style.display = "none";
});

document.querySelector(".form").addEventListener("submit", function(e) {
  e.preventDefault();

  // Simuleer "succesvolle verzending"
  document.getElementById("contact-modal").style.display = "flex";
  e.target.reset();
});

// Sluit modal
document.getElementById("close-modal").addEventListener("click", () => {
  document.getElementById("contact-modal").style.display = "none";
});



// Pak de juiste elementen
const contact = document.querySelector(".card-contact");
const destructiveDot = document.querySelector(".dot.destructive");
const warningDot = document.querySelector(".dot.warning");
const successDot = document.querySelector(".dot.success");

// Success → confetti
successDot.addEventListener("click", () => {
  confetti({ origin: { x: 0, y: 1 }, angle: 60, spread: 55, particleCount: 80, startVelocity: 80 });
  confetti({ origin: { x: 0.5, y: 1 }, angle: 90, spread: 55, particleCount: 80, startVelocity: 80 });
  confetti({ origin: { x: 1, y: 1 }, angle: 120, spread: 55, particleCount: 80, startVelocity: 80 });
});

// Warning → bounce animatie
warningDot.addEventListener("click", () => {
  contact.classList.remove("warning");
  void contact.offsetWidth;
  contact.classList.add("warning");
});

// Destructive → scale weggooien en terugkomen
destructiveDot.addEventListener("click", () => {
  contact.classList.remove("destroy");
  void contact.offsetWidth;
  contact.classList.add("destroy");

  setTimeout(() => {
    contact.classList.remove("destroy");
    contact.style.transform = "scale(1)";
    contact.style.opacity = "1";
  }, 3000);
});
</script>
